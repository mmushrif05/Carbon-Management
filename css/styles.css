:root {
  --bg: #0b0f0e; --bg2: #111916; --bg3: #16201b; --bg4: #1c2a23;
  --border: rgba(52,211,153,0.12); --border2: rgba(52,211,153,0.06);
  --green: #34d399; --green2: #059669; --green3: #047857;
  --blue: #60a5fa; --orange: #fb923c; --red: #f87171; --purple: #a78bfa; --cyan: #22d3ee; --yellow: #fbbf24;
  --slate3: #cbd5e1; --slate4: #94a3b8; --slate5: #64748b; --slate6: #475569;
  --text: #ecfdf5; --text2: #a7f3d0; --text3: #6ee7b7;
  --sidebar-w: 240px; --radius: 12px;
}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100vh}
::-webkit-scrollbar{width:6px}::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}

/* DB STATUS */
.db-status{position:fixed;top:12px;right:12px;z-index:999;display:flex;align-items:center;gap:6px;padding:6px 14px;border-radius:20px;font-size:10px;font-weight:700;letter-spacing:1px;text-transform:uppercase}
.db-status.online{background:rgba(52,211,153,0.1);border:1px solid rgba(52,211,153,0.3);color:var(--green)}
.db-status.offline{background:rgba(248,113,113,0.1);border:1px solid rgba(248,113,113,0.3);color:var(--red)}
.db-status .db-dot{width:7px;height:7px;border-radius:50%;animation:pulse 2s infinite}
.db-status.online .db-dot{background:var(--green)}
.db-status.offline .db-dot{background:var(--red)}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.4}}

/* LOGIN */
#loginScreen{display:flex;align-items:center;justify-content:center;min-height:100vh;background:radial-gradient(ellipse at 30% 20%,rgba(5,150,105,0.08),transparent 60%),var(--bg)}
.login-card{width:480px;max-width:92vw;text-align:center}
.login-logo{font-size:42px;margin-bottom:8px}
.login-title{font-size:28px;font-weight:800;letter-spacing:-1px;margin-bottom:4px}
.login-title span{color:var(--green)}
.login-sub{font-size:13px;color:var(--slate4);margin-bottom:28px}
.login-label{font-size:10px;font-weight:700;letter-spacing:1.5px;color:var(--text3);text-transform:uppercase;margin-bottom:10px;text-align:left}
.role-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-bottom:20px}
.role-btn{padding:20px 12px;background:var(--bg2);border:2px solid var(--border);border-radius:14px;cursor:pointer;transition:all .25s;text-align:center}
.role-btn:hover{border-color:var(--green);background:var(--bg3)}
.role-btn.selected{border-color:var(--green);background:rgba(52,211,153,0.08)}
.role-btn .r-icon{font-size:28px;margin-bottom:8px}
.role-btn .r-name{font-size:13px;font-weight:700;color:var(--text);margin-bottom:4px}
.role-btn .r-desc{font-size:10px;color:var(--slate5);line-height:1.4}
.login-input{margin-bottom:16px;text-align:left}
.login-input input{width:100%;padding:12px 16px;background:var(--bg2);border:2px solid var(--border);border-radius:10px;color:var(--text);font-size:14px;outline:none;transition:border-color .2s}
.login-input input:focus{border-color:var(--green)}
.login-input input::placeholder{color:var(--slate6)}
.login-project{margin-bottom:20px;text-align:left}
.login-project select{width:100%;padding:12px 16px;background:var(--bg2);border:2px solid var(--border);border-radius:10px;color:var(--text);font-size:14px;outline:none;appearance:none;cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%2334d399' stroke-width='2'%3E%3Cpath d='M2 4l4 4 4-4'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 14px center}
.login-project select option{background:var(--bg2)}
.login-footer{font-size:10px;color:var(--slate6);margin-top:24px}
.login-error{display:none;padding:10px;background:rgba(248,113,113,0.1);border:1px solid rgba(248,113,113,0.2);border-radius:8px;color:var(--red);font-size:12px;margin-bottom:12px;text-align:left}
.login-toggle{font-size:12px;color:var(--slate4);margin-top:16px}
.login-toggle a{color:var(--green);cursor:pointer;text-decoration:underline}
.login-toggle a:hover{color:var(--text3)}
.login-btn{width:100%;padding:14px;background:linear-gradient(135deg,var(--green3),var(--green2));border:none;border-radius:10px;color:#fff;font-size:14px;font-weight:700;cursor:pointer;transition:all .2s;font-family:inherit;letter-spacing:.3px}
.login-btn:hover{box-shadow:0 4px 20px rgba(5,150,105,0.35)}
.login-btn:disabled{opacity:0.5;cursor:not-allowed}
.login-btn-secondary{width:100%;padding:14px;background:var(--bg3);border:2px solid var(--border);border-radius:10px;color:var(--text2);font-size:14px;font-weight:700;cursor:pointer;transition:all .2s;font-family:inherit;margin-top:10px}
.login-btn-secondary:hover{border-color:var(--green)}

/* APP SHELL */
#appShell{display:none}
.app-layout{display:flex;min-height:100vh}
.sidebar{width:var(--sidebar-w);background:var(--bg2);border-right:1px solid var(--border2);display:flex;flex-direction:column;position:fixed;top:0;left:0;bottom:0;z-index:100;transition:transform .3s}
.sb-header{padding:20px 16px 16px;border-bottom:1px solid var(--border2)}
.sb-logo{display:flex;align-items:center;gap:8px;margin-bottom:4px}
.sb-logo-icon{font-size:22px}
.sb-logo-text{font-size:16px;font-weight:800;letter-spacing:-.5px}
.sb-logo-text span{color:var(--green)}
.sb-version{font-size:9px;color:var(--slate5);letter-spacing:1px;text-transform:uppercase}
.sb-nav{flex:1;padding:12px 8px;overflow-y:auto}
.sb-section{font-size:9px;font-weight:700;letter-spacing:1.5px;color:var(--slate5);text-transform:uppercase;padding:12px 12px 6px}
.sb-item{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;cursor:pointer;transition:all .2s;font-size:13px;font-weight:500;color:var(--slate4);margin-bottom:2px}
.sb-item:hover{background:var(--bg3);color:var(--text2)}
.sb-item.active{background:rgba(52,211,153,0.1);color:var(--green);font-weight:600}
.sb-item .sb-icon{width:20px;text-align:center;font-size:15px}
.sb-item .sb-badge{margin-left:auto;padding:2px 7px;background:rgba(251,146,60,0.15);border-radius:10px;font-size:10px;font-weight:700;color:var(--orange)}
.sb-footer{padding:12px 16px;border-top:1px solid var(--border2)}
.sb-user{display:flex;align-items:center;gap:10px}
.sb-avatar{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700}
.sb-avatar.contractor{background:rgba(96,165,250,0.15);color:var(--blue)}
.sb-avatar.consultant{background:rgba(52,211,153,0.15);color:var(--green)}
.sb-avatar.client{background:rgba(167,139,250,0.15);color:var(--purple)}
.sb-uname{font-size:12px;font-weight:600}
.sb-urole{font-size:10px;color:var(--slate5);text-transform:capitalize}
.sb-logout{margin-top:8px;font-size:11px;color:var(--slate5);cursor:pointer;text-decoration:underline}
.sb-logout:hover{color:var(--red)}

.main-content{margin-left:var(--sidebar-w);flex:1;min-height:100vh}
.page-header{padding:24px 32px 20px;border-bottom:1px solid var(--border2);background:linear-gradient(180deg,var(--bg2),var(--bg))}
.page-title{font-size:22px;font-weight:700}
.page-desc{font-size:12px;color:var(--slate4);margin-top:4px}
.page-body{padding:24px 32px}
.page{display:none}.page.active{display:block}

.card{background:var(--bg2);border:1px solid var(--border2);border-radius:var(--radius);padding:20px;margin-bottom:16px}
.card-title{font-size:11px;font-weight:700;letter-spacing:1.5px;color:var(--text3);text-transform:uppercase;margin-bottom:14px;display:flex;align-items:center;gap:8px}
.card-title::after{content:'';flex:1;height:1px;background:var(--border2)}

.stats-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;margin-bottom:24px}
.stat-card{padding:18px 16px;border-radius:var(--radius);border:1px solid transparent;position:relative;overflow:hidden}
.stat-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px}
.stat-card .sc-label{font-size:10px;font-weight:700;letter-spacing:1px;text-transform:uppercase;opacity:.7;margin-bottom:6px}
.stat-card .sc-value{font-size:clamp(20px,3vw,28px);font-weight:800;line-height:1.1}
.stat-card .sc-sub{font-size:10px;opacity:.5;margin-top:4px}
.stat-card.green{background:rgba(52,211,153,0.06);border-color:rgba(52,211,153,0.12);color:var(--green)}.stat-card.green::before{background:var(--green)}
.stat-card.blue{background:rgba(96,165,250,0.06);border-color:rgba(96,165,250,0.12);color:var(--blue)}.stat-card.blue::before{background:var(--blue)}
.stat-card.orange{background:rgba(251,146,60,0.06);border-color:rgba(251,146,60,0.12);color:var(--orange)}.stat-card.orange::before{background:var(--orange)}
.stat-card.purple{background:rgba(167,139,250,0.06);border-color:rgba(167,139,250,0.12);color:var(--purple)}.stat-card.purple::before{background:var(--purple)}
.stat-card.slate{background:rgba(148,163,184,0.06);border-color:rgba(148,163,184,0.1);color:var(--slate3)}.stat-card.slate::before{background:var(--slate4)}
.stat-card.cyan{background:rgba(34,211,238,0.06);border-color:rgba(34,211,238,0.12);color:var(--cyan)}.stat-card.cyan::before{background:var(--cyan)}

.form-row{display:grid;gap:12px;margin-bottom:14px}
.form-row.c2{grid-template-columns:1fr 1fr}.form-row.c3{grid-template-columns:1fr 1fr 1fr}.form-row.c4{grid-template-columns:1fr 1fr 1fr 1fr}
@media(max-width:768px){.form-row.c3,.form-row.c4{grid-template-columns:1fr 1fr}}
@media(max-width:480px){.form-row.c2,.form-row.c3,.form-row.c4{grid-template-columns:1fr}}
.fg label{display:block;font-size:10px;font-weight:700;letter-spacing:1px;color:var(--text2);margin-bottom:5px;text-transform:uppercase}
.fg input,.fg select,.fg textarea{width:100%;padding:10px 12px;background:var(--bg3);border:1.5px solid var(--border);border-radius:8px;color:#fff;font-size:14px;outline:none;transition:border-color .2s;font-family:inherit}
.fg input:focus,.fg select:focus{border-color:var(--green)}
.fg input::placeholder{color:var(--slate6);font-size:12px}
.fg select{appearance:none;cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' fill='none' stroke='%2334d399' stroke-width='2'%3E%3Cpath d='M1 3l4 4 4-4'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 10px center;padding-right:28px}
.fg select option{background:var(--bg2)}
.fg .fg-help{font-size:10px;color:var(--slate5);margin-top:3px}
.fg .fg-readonly{background:var(--bg4);border-color:transparent;color:var(--green);font-weight:700;pointer-events:none}
.btn{padding:11px 20px;border:none;border-radius:10px;font-size:13px;font-weight:700;cursor:pointer;transition:all .2s;font-family:inherit;letter-spacing:.3px}
.btn:active{transform:scale(.97)}
.btn-primary{background:linear-gradient(135deg,var(--green3),var(--green2));color:#fff;box-shadow:0 4px 16px rgba(5,150,105,0.25)}
.btn-secondary{background:var(--bg3);color:var(--text2);border:1.5px solid var(--border)}
.btn-danger{background:rgba(248,113,113,0.1);color:var(--red);border:1.5px solid rgba(248,113,113,0.2)}
.btn-approve{background:rgba(52,211,153,0.1);color:var(--green);border:1.5px solid rgba(52,211,153,0.2)}
.btn-row{display:flex;gap:10px;margin-top:16px}
.btn-sm{padding:7px 14px;font-size:11px;border-radius:8px}
.tbl-wrap{overflow-x:auto}
table{width:100%;border-collapse:collapse;font-size:12px}
th{padding:10px 8px;font-size:9px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--green);border-bottom:1.5px solid var(--border);white-space:nowrap;text-align:left}
th.r{text-align:right}
td{padding:10px 8px;border-bottom:1px solid var(--border2)}
td.r{text-align:right;font-variant-numeric:tabular-nums}
td.mono{font-family:'Courier New',monospace;font-size:11px}
.badge{display:inline-flex;padding:3px 10px;border-radius:6px;font-size:10px;font-weight:700;letter-spacing:.5px}
.badge.pending{background:rgba(251,191,36,0.1);color:var(--yellow);border:1px solid rgba(251,191,36,0.2)}
.badge.review{background:rgba(96,165,250,0.1);color:var(--blue);border:1px solid rgba(96,165,250,0.2)}
.badge.approved{background:rgba(52,211,153,0.1);color:var(--green);border:1px solid rgba(52,211,153,0.2)}
.badge.rejected{background:rgba(248,113,113,0.1);color:var(--red);border:1px solid rgba(248,113,113,0.2)}
.bar-chart{display:flex;align-items:flex-end;gap:12px;height:200px;padding:0 8px;border-bottom:1px solid var(--border2)}
.bar-group{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;height:100%;justify-content:flex-end}
.bar-pair{display:flex;gap:3px;align-items:flex-end;width:100%;justify-content:center}
.bar{width:20px;border-radius:4px 4px 0 0;transition:height .5s ease;min-height:2px}
.bar.baseline{background:rgba(148,163,184,0.35)}.bar.actual{background:rgba(96,165,250,0.5)}
.bar-label{font-size:9px;color:var(--slate5);text-align:center;margin-top:6px}
.chart-legend{display:flex;gap:16px;justify-content:center;margin-top:12px;font-size:10px;color:var(--slate4)}
.chart-legend-dot{display:inline-block;width:10px;height:10px;border-radius:3px;margin-right:5px;vertical-align:middle}
.donut-wrap{display:flex;align-items:center;gap:24px}
.donut-svg{width:140px;height:140px}
.donut-legend{display:flex;flex-direction:column;gap:8px}
.donut-legend-item{display:flex;align-items:center;gap:8px;font-size:12px;color:var(--slate3)}
.donut-legend-dot{width:12px;height:12px;border-radius:3px;flex-shrink:0}
.cert-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}
.cert-card{padding:16px;border-radius:var(--radius);border:1.5px solid var(--border);background:var(--bg3);text-align:center;transition:all .2s}
.cert-card:hover{border-color:var(--green)}
.cert-card .cc-icon{font-size:28px;margin-bottom:8px}
.cert-card .cc-name{font-size:14px;font-weight:700;margin-bottom:4px}
.cert-card .cc-status{font-size:10px;color:var(--slate5)}
.cert-card .cc-bar{height:6px;background:var(--bg);border-radius:3px;margin-top:10px;overflow:hidden}
.cert-card .cc-fill{height:100%;border-radius:3px;transition:width .5s}
.api-item{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;background:var(--bg3);border:1px solid var(--border2);border-radius:10px;margin-bottom:8px}
.api-left{display:flex;align-items:center;gap:12px}
.api-icon{font-size:20px}
.api-name{font-size:13px;font-weight:600}
.api-desc{font-size:10px;color:var(--slate5)}
.toggle{width:44px;height:24px;border-radius:12px;background:var(--bg);border:2px solid var(--border);cursor:pointer;position:relative;transition:all .2s}
.toggle.on{background:rgba(52,211,153,0.2);border-color:var(--green)}
.toggle::after{content:'';position:absolute;width:16px;height:16px;border-radius:50%;background:var(--slate5);top:2px;left:2px;transition:all .2s}
.toggle.on::after{background:var(--green);left:22px}
.flow-steps{display:flex;align-items:center;gap:0;margin:16px 0}
.flow-step{display:flex;flex-direction:column;align-items:center;gap:4px;flex:1}
.flow-dot{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px;border:2px solid var(--border);background:var(--bg3)}
.flow-dot.done{border-color:var(--green);background:rgba(52,211,153,0.1)}
.flow-dot.current{border-color:var(--blue);background:rgba(96,165,250,0.1);animation:pulseFlow 2s infinite}
@keyframes pulseFlow{0%,100%{box-shadow:0 0 0 0 rgba(96,165,250,0.3)}50%{box-shadow:0 0 0 8px rgba(96,165,250,0)}}
.flow-label{font-size:9px;font-weight:600;color:var(--slate5);text-transform:uppercase;letter-spacing:.5px}
.flow-line{flex:1;height:2px;background:var(--border);margin:0 -4px;margin-bottom:18px}
.flow-line.done{background:var(--green)}
.empty{text-align:center;padding:40px;color:var(--slate5)}
.empty-icon{font-size:36px;opacity:.3;margin-bottom:8px}
.total-row td{font-weight:700;border-top:2px solid rgba(34,197,94,0.2);border-bottom:none;padding-top:12px}
.menu-toggle{display:none;position:fixed;top:16px;left:16px;z-index:200;width:40px;height:40px;background:var(--bg2);border:1px solid var(--border);border-radius:10px;cursor:pointer;font-size:18px;color:var(--green);align-items:center;justify-content:center}
@media(max-width:768px){.sidebar{transform:translateX(-100%)}.sidebar.open{transform:translateX(0)}.main-content{margin-left:0}.menu-toggle{display:flex}.page-body{padding:16px}.page-header{padding:16px 16px 14px 60px}}

/* INVITATION SYSTEM */
.invite-banner{display:flex;align-items:center;gap:12px;padding:14px 18px;background:rgba(52,211,153,0.08);border:1.5px solid rgba(52,211,153,0.2);border-radius:12px}
.invite-banner-icon{font-size:24px}
.invite-banner-text{font-size:13px;color:var(--text2);line-height:1.5}
.invite-banner-text strong{color:var(--text)}
.invite-notice{display:flex;align-items:flex-start;gap:10px;padding:12px 16px;background:rgba(251,191,36,0.06);border:1px solid rgba(251,191,36,0.15);border-radius:10px;margin-bottom:16px}
.invite-notice-icon{font-size:18px;flex-shrink:0;margin-top:1px}
.invite-notice-text{font-size:11px;color:var(--slate4);line-height:1.5}
.invite-form .form-row{margin-bottom:14px}

/* LOADING OVERLAY */
.loading-overlay{position:fixed;inset:0;background:rgba(11,15,14,0.9);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999}
.loading-spinner{width:40px;height:40px;border:3px solid var(--border);border-top-color:var(--green);border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.loading-text{margin-top:16px;color:var(--green);font-size:13px;font-weight:600}

/* ===== COMPACT PROJECT CARDS ===== */
.pcard-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:10px}
.pcard{background:var(--bg2);border:1px solid var(--border2);border-radius:10px;padding:12px 14px;transition:all .25s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}
.pcard:hover{border-color:rgba(96,165,250,0.3);transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,0.3)}
.pcard:active{transform:translateY(0) scale(0.98)}
.pcard::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:var(--blue);opacity:0.5}
.pcard-top{margin-bottom:8px}
.pcard-name{font-size:13px;font-weight:700;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.pcard-code{font-size:9px;color:var(--blue);font-family:monospace;margin-top:1px;opacity:0.7}
.pcard-body{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.pcard-metric{}
.pcard-metric-val{font-size:18px;font-weight:800;line-height:1.1}
.pcard-metric-lbl{font-size:9px;color:var(--slate5);margin-top:1px}
.pcard-spark{opacity:0.8}
.pcard-gauge{margin-bottom:6px}
.pcard-gauge-track{height:4px;background:var(--bg3);border-radius:2px;overflow:hidden}
.pcard-gauge-fill{height:100%;border-radius:2px;transition:width 0.6s cubic-bezier(.4,0,.2,1)}
.pcard-gauge-label{font-size:10px;font-weight:700;margin-top:3px}
.pcard-footer{display:flex;justify-content:space-between;align-items:center}

/* ===== PROJECT MODAL (iOS-style sheet) ===== */
.pm-overlay{position:fixed;inset:0;background:rgba(0,0,0,0);z-index:5000;display:flex;align-items:flex-end;justify-content:center;transition:background .35s ease;pointer-events:none}
.pm-overlay.pm-visible{background:rgba(0,0,0,0.6);pointer-events:auto}
.pm-sheet{position:relative;width:100%;max-width:960px;max-height:92vh;background:var(--bg2);border-radius:16px 16px 0 0;border:1px solid var(--border);border-bottom:none;transform:translateY(100%);transition:transform .4s cubic-bezier(.32,1.2,.54,1);overflow:hidden;display:flex;flex-direction:column}
.pm-sheet.pm-sheet-visible{transform:translateY(0)}
.pm-handle{display:flex;justify-content:center;padding:10px 0 4px;cursor:pointer}
.pm-handle-bar{width:40px;height:4px;border-radius:2px;background:var(--slate6)}
.pm-close{position:absolute;top:10px;right:16px;width:28px;height:28px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:var(--bg3);color:var(--slate4);font-size:18px;cursor:pointer;transition:all .2s;z-index:2;border:none}
.pm-close:hover{background:var(--border);color:var(--text)}
.pm-scroll{padding:8px 24px 28px;overflow-y:auto;flex:1}

/* Modal Tabs */
.pm-tabs{display:flex;gap:2px;margin:10px 0 12px;border-bottom:2px solid var(--border2);padding-bottom:0}
.pm-tab{padding:7px 16px;font-size:11px;font-weight:700;color:var(--slate5);background:none;border:none;border-bottom:2px solid transparent;cursor:pointer;transition:all .2s;font-family:inherit;margin-bottom:-2px}
.pm-tab:hover{color:var(--text2)}
.pm-tab.active{color:var(--green);border-bottom-color:var(--green)}

/* ===== STICKY HEADER ===== */
.dash-sticky{background:var(--bg2);border:1px solid var(--border2);border-radius:var(--radius);padding:12px 16px;margin-bottom:10px;position:sticky;top:0;z-index:50}
.dash-kpi-row{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:8px}
.dash-kpi{text-align:center;min-width:60px}
.dash-kpi-v{font-size:20px;font-weight:800;line-height:1.1}
.dash-kpi-l{font-size:8px;font-weight:600;color:var(--slate5);text-transform:uppercase;letter-spacing:0.5px;margin-top:1px}
.dash-kpi-sep{width:1px;height:28px;background:var(--border2);flex-shrink:0}
.dash-target-input{width:38px;font-size:14px;font-weight:800;text-align:center;padding:2px;background:var(--bg3);border:1px solid var(--border);border-radius:4px;color:var(--red)}
.dash-track-badge{padding:4px 10px;border-radius:6px;font-size:10px;font-weight:800;letter-spacing:0.5px}
.dash-track-badge.on{background:rgba(52,211,153,0.12);color:var(--green);border:1px solid rgba(52,211,153,0.25)}
.dash-track-badge.off{background:rgba(248,113,113,0.12);color:var(--red);border:1px solid rgba(248,113,113,0.25)}
.dash-filter-row{display:flex;align-items:center;gap:10px;justify-content:space-between}
.dash-search-input{padding:4px 10px;font-size:11px;background:var(--bg3);border:1px solid var(--border);border-radius:6px;color:var(--text);width:180px;font-family:inherit}
.dash-search-input::placeholder{color:var(--slate6)}
.dash-sort{padding:3px 8px;font-size:9px;font-weight:700;background:var(--bg3);border:1px solid var(--border2);border-radius:5px;color:var(--slate5);cursor:pointer;transition:all .15s;font-family:inherit}
.dash-sort:hover{border-color:var(--border);color:var(--text2)}
.dash-sort.active{background:rgba(52,211,153,0.1);border-color:rgba(52,211,153,0.25);color:var(--green)}

/* ===== DECISION ROW ===== */
.dash-decision-row{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:10px}
.dash-dcard{display:flex;align-items:center;gap:10px;padding:10px 12px;background:var(--bg2);border:1px solid var(--border2);border-radius:10px;cursor:pointer;transition:all .2s}
.dash-dcard:hover{border-color:var(--border);transform:translateY(-1px)}
.dash-dcard-icon{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:800;flex-shrink:0}
.dash-dcard-title{font-size:8px;font-weight:700;color:var(--slate5);text-transform:uppercase;letter-spacing:0.5px}
.dash-dcard-val{font-size:12px;font-weight:700;color:var(--text);margin-top:1px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:120px}
.dash-dcard-sub{font-size:9px;color:var(--slate5)}
.dash-dcard-red{border-color:rgba(248,113,113,0.15)}
.dash-dcard-amber{border-color:rgba(251,191,36,0.15)}
.dash-dcard-green{border-color:rgba(52,211,153,0.15)}

/* ===== PROJECT CARD BADGE ===== */
.pcard-red-badge{font-size:11px;font-weight:800;padding:1px 6px;border-radius:4px;flex-shrink:0}

/* ===== AI ADVISOR ===== */
.ai-advisor-panel{padding:4px 0}
.ai-result-card{padding:16px;background:var(--bg3);border:1px solid rgba(167,139,250,0.15);border-radius:12px}
.ai-result-body{font-size:11px;line-height:1.7;color:var(--slate3)}
.ai-result-body strong{color:var(--text)}

/* ===== EDIT/DELETE REQUESTS ===== */
.edit-request-card{padding:12px 14px;background:var(--bg3);border-radius:10px;margin-bottom:8px;border:1px solid var(--border)}
.edit-request-card.pending{border-left:3px solid var(--orange);background:rgba(251,146,60,0.03)}
.edit-request-card.resolved{border-left:3px solid var(--slate6)}
.edit-req-actions{white-space:nowrap}
.edit-req-actions .btn{cursor:pointer;border-radius:4px}

@media(max-width:768px){.pm-sheet{max-width:100%}.pm-scroll{padding:8px 14px 24px}.pcard-grid{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}.dash-decision-row{grid-template-columns:1fr 1fr}.dash-kpi-row{gap:8px}.dash-kpi-v{font-size:16px}}

/* ===== DOCUMENT INTELLIGENCE ===== */
.intel-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;gap:12px;flex-wrap:wrap}
.intel-tabs{display:flex;gap:2px;background:var(--bg2);border-radius:10px;padding:3px;border:1px solid var(--border2)}
.intel-tab{padding:8px 18px;font-size:12px;font-weight:700;color:var(--slate4);background:none;border:none;border-radius:8px;cursor:pointer;transition:all .2s;font-family:inherit}
.intel-tab:hover{color:var(--text2)}
.intel-tab.active{background:rgba(52,211,153,0.12);color:var(--green)}
.intel-project-select select{padding:8px 14px;background:var(--bg2);border:1.5px solid var(--border);border-radius:8px;color:var(--text);font-size:12px;font-family:inherit;outline:none;appearance:none;cursor:pointer;min-width:200px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' fill='none' stroke='%2334d399' stroke-width='2'%3E%3Cpath d='M1 3l4 4 4-4'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 10px center;padding-right:28px}
.intel-project-select select option{background:var(--bg2)}

/* Upload area */
.intel-upload-area{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 24px;border:2px dashed var(--border);border-radius:12px;cursor:pointer;transition:all .25s;background:var(--bg3)}
.intel-upload-area:hover,.intel-upload-area.dragover{border-color:var(--green);background:rgba(52,211,153,0.04)}
.intel-upload-icon{font-size:32px;margin-bottom:8px;opacity:0.6}
.intel-upload-text{font-size:13px;font-weight:600;color:var(--text2);margin-bottom:4px}
.intel-upload-sub{font-size:10px;color:var(--slate5);text-align:center;max-width:400px}

/* Upload status */
.intel-status{padding:10px 14px;border-radius:8px;font-size:12px;margin-top:12px}
.intel-status-info{background:rgba(96,165,250,0.08);border:1px solid rgba(96,165,250,0.2);color:var(--blue)}
.intel-status-success{background:rgba(52,211,153,0.08);border:1px solid rgba(52,211,153,0.2);color:var(--green)}
.intel-status-error{background:rgba(248,113,113,0.08);border:1px solid rgba(248,113,113,0.2);color:var(--red)}

/* Document grid */
.intel-doc-grid{display:flex;flex-direction:column;gap:8px}
.intel-doc-card{padding:12px 14px;background:var(--bg3);border:1px solid var(--border2);border-radius:10px;transition:all .2s}
.intel-doc-card:hover{border-color:var(--border)}
.intel-doc-header{display:flex;align-items:center;gap:10px}
.intel-doc-icon{font-size:20px;flex-shrink:0}
.intel-doc-info{flex:1;min-width:0}
.intel-doc-name{font-size:13px;font-weight:700;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.intel-doc-meta{font-size:10px;color:var(--slate5);margin-top:2px}
.intel-doc-tags{display:flex;flex-wrap:wrap;gap:4px;margin-top:8px}
.intel-doc-desc{font-size:11px;color:var(--slate4);margin-top:6px}

/* Tags */
.intel-tag{display:inline-flex;padding:2px 8px;border-radius:4px;font-size:9px;font-weight:700;letter-spacing:.3px;text-transform:capitalize}
.intel-tag-material{background:rgba(96,165,250,0.1);color:var(--blue);border:1px solid rgba(96,165,250,0.15)}
.intel-tag-topic{background:rgba(167,139,250,0.1);color:var(--purple);border:1px solid rgba(167,139,250,0.15)}

/* Analysis dimensions */
.intel-dims{display:flex;flex-direction:column;gap:6px}
.intel-dim-card{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;background:var(--bg3);border:1px solid var(--border2);border-radius:10px;transition:all .2s}
.intel-dim-card:hover{border-color:var(--border)}
.intel-dim-done{border-left:3px solid var(--green)}
.intel-dim-left{display:flex;align-items:center;gap:10px}
.intel-dim-icon{font-size:18px}
.intel-dim-name{font-size:13px;font-weight:700;color:var(--text)}
.intel-dim-desc{font-size:10px;color:var(--slate5)}
.intel-dim-right{display:flex;align-items:center;gap:6px;flex-shrink:0}

/* Analysis results */
.intel-summary{font-size:12px;color:var(--slate3);padding:10px 14px;background:rgba(52,211,153,0.04);border-radius:8px;margin-bottom:12px;border-left:3px solid var(--green)}
.intel-error{font-size:12px;color:var(--red);padding:10px 14px;background:rgba(248,113,113,0.06);border-radius:8px;border-left:3px solid var(--red)}
.intel-findings{display:flex;flex-direction:column;gap:10px}

/* Individual finding */
.intel-finding{padding:14px 16px;background:var(--bg3);border:1px solid var(--border2);border-radius:10px}
.intel-sev-high{border-left:3px solid var(--red)}
.intel-sev-med{border-left:3px solid var(--orange)}
.intel-sev-low{border-left:3px solid var(--blue)}
.intel-finding-header{display:flex;align-items:flex-start;gap:8px;margin-bottom:8px}
.intel-sev-badge{display:inline-flex;padding:2px 8px;border-radius:4px;font-size:9px;font-weight:800;letter-spacing:.5px;flex-shrink:0}
.intel-sev-badge-high{background:rgba(248,113,113,0.12);color:var(--red);border:1px solid rgba(248,113,113,0.2)}
.intel-sev-badge-medium{background:rgba(251,146,60,0.12);color:var(--orange);border:1px solid rgba(251,146,60,0.2)}
.intel-sev-badge-low{background:rgba(96,165,250,0.12);color:var(--blue);border:1px solid rgba(96,165,250,0.2)}
.intel-finding-text{font-size:12px;font-weight:600;color:var(--text);line-height:1.5}

/* Citations â€” the key differentiator */
.intel-citations{display:flex;flex-direction:column;gap:6px;margin:8px 0;padding:8px 12px;background:rgba(167,139,250,0.04);border-radius:8px;border:1px solid rgba(167,139,250,0.1)}
.intel-citation{display:flex;flex-direction:column;gap:4px}
.intel-cite-badge{display:inline-flex;align-items:center;gap:4px;font-size:10px;font-weight:700;color:var(--purple)}
.intel-cite-icon{font-size:12px}
.intel-cite-quote{font-size:11px;color:var(--slate3);font-style:italic;line-height:1.5;padding-left:16px;border-left:2px solid rgba(167,139,250,0.2)}

/* Recommendation */
.intel-recommendation{font-size:11px;color:var(--slate3);margin-top:8px;padding:8px 12px;background:rgba(52,211,153,0.04);border-radius:6px;line-height:1.5}
.intel-rec-label{font-weight:700;color:var(--green)}
.intel-impact{display:inline-flex;padding:1px 6px;background:rgba(52,211,153,0.1);color:var(--green);border-radius:4px;font-size:10px;font-weight:700;margin-left:4px}

/* History */
.intel-history-card{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;background:var(--bg3);border:1px solid var(--border2);border-radius:10px;cursor:pointer;transition:all .2s;margin-bottom:6px}
.intel-history-card:hover{border-color:var(--border);transform:translateY(-1px)}
.intel-history-left{display:flex;align-items:center;gap:10px}
.intel-history-right{display:flex;align-items:center;gap:6px;flex-shrink:0}

/* Anomaly / Data Integrity */
.anomaly-banner{background:rgba(248,113,113,0.05)!important;border:1px solid rgba(248,113,113,0.25)!important;border-left:4px solid var(--red)!important}
.force-actions{display:flex;gap:3px;align-items:center;white-space:nowrap}
.force-del-btn{font-size:8px!important;padding:2px 6px!important;background:rgba(248,113,113,0.1)!important;color:var(--red)!important;border:1px solid rgba(248,113,113,0.25)!important;font-weight:700!important;border-radius:4px!important;cursor:pointer;transition:all .15s}
.force-del-btn:hover{background:rgba(248,113,113,0.2)!important}
.anomaly-fix-btn{font-size:8px!important;padding:2px 6px!important;background:rgba(251,146,60,0.1)!important;color:var(--orange)!important;border:1px solid rgba(251,146,60,0.25)!important;font-weight:700!important;border-radius:4px!important;cursor:pointer;transition:all .15s}
.anomaly-fix-btn:hover{background:rgba(251,146,60,0.2)!important}

@media(max-width:768px){.intel-header{flex-direction:column;align-items:stretch}.intel-project-select select{width:100%}.intel-dim-card{flex-direction:column;align-items:stretch;gap:8px}.intel-dim-right{justify-content:flex-end}}

/* ===== IoT LIVE MONITORING ===== */
.iot-live-header{display:flex;align-items:center;gap:10px;padding:12px 16px;background:var(--bg2);border:1px solid var(--border2);border-radius:var(--radius);margin-bottom:16px}
.iot-live-dot{width:10px;height:10px;border-radius:50%;background:var(--slate5);flex-shrink:0}
.iot-live-dot.active{background:var(--green);animation:pulse 2s infinite}
.iot-live-label{font-size:10px;font-weight:800;letter-spacing:2px;color:var(--slate5)}
.iot-live-dot.active+.iot-live-label{color:var(--green)}
.iot-live-ts{font-size:11px;color:var(--slate4);font-family:'Courier New',monospace}
.iot-live-coord{font-size:10px;color:var(--slate5);margin-left:8px}
.iot-grid-2col{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:0}
@media(max-width:900px){.iot-grid-2col{grid-template-columns:1fr}}

/* AQI Gauge */
.iot-aqi-gauge{width:140px;height:90px;flex-shrink:0}
.iot-gauge-empty{width:140px;height:90px;display:flex;align-items:center;justify-content:center;font-size:11px;color:var(--slate5);background:var(--bg3);border-radius:10px}
.iot-aqi-section{display:flex;align-items:center;gap:24px}
.iot-aqi-details{flex:1;display:flex;flex-direction:column;gap:6px}
.iot-aqi-detail-row{display:flex;justify-content:space-between;align-items:center;padding:4px 10px;background:var(--bg3);border-radius:6px;font-size:11px}
.iot-aqi-detail-row span{color:var(--slate4)}
.iot-aqi-detail-row strong{font-size:12px;font-weight:700}

/* Pollutant Bars */
.iot-pollutant-bars{display:flex;flex-direction:column;gap:10px}
.iot-pollutant-row{display:flex;align-items:center;gap:10px}
.iot-poll-label{width:60px;font-size:10px;font-weight:700;color:var(--text2);display:flex;align-items:center;gap:4px;flex-shrink:0}
.iot-poll-icon{font-size:12px}
.iot-poll-bar-wrap{flex:1;display:flex;align-items:center;gap:10px}
.iot-poll-bar-bg{flex:1;height:12px;background:var(--bg3);border-radius:6px;position:relative;overflow:visible}
.iot-poll-bar-fill{height:100%;border-radius:6px;transition:width 0.5s ease}
.iot-poll-who-line{position:absolute;top:-3px;bottom:-3px;width:2px;background:var(--red);border-radius:1px;opacity:0.6;z-index:1}
.iot-poll-value{width:80px;text-align:right;font-size:11px;font-weight:700;font-family:'Courier New',monospace}
.iot-poll-unit{font-size:8px;font-weight:400;color:var(--slate5)}

/* Sparklines */
.iot-sparkline-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
@media(max-width:900px){.iot-sparkline-grid{grid-template-columns:repeat(2,1fr)}}
.iot-sparkline-item{padding:10px;background:var(--bg3);border-radius:10px;border:1px solid var(--border2)}
.iot-sparkline-label{font-size:9px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--slate4);margin-bottom:6px}

/* Vehicle Status */
.iot-vstatus{display:inline-flex;align-items:center;gap:3px;padding:3px 8px;border-radius:6px;font-size:9px;font-weight:700;letter-spacing:.3px;text-transform:capitalize}

/* Combined Emissions */
.iot-combined-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
@media(max-width:900px){.iot-combined-grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:600px){.iot-combined-grid{grid-template-columns:1fr}}
.iot-combined-block{padding:20px;background:var(--bg3);border:1px solid var(--border2);border-radius:var(--radius);text-align:center}
.iot-cb-icon{font-size:28px;margin-bottom:8px}
.iot-cb-title{font-size:13px;font-weight:700;color:var(--text);margin-bottom:4px}
.iot-cb-desc{font-size:10px;color:var(--slate5);margin-bottom:12px}
.iot-cb-value{font-size:24px;font-weight:800;line-height:1.2}
.iot-cb-value span{font-size:11px;font-weight:600;opacity:0.7}
.iot-cb-sub{font-size:10px;color:var(--slate5);margin-top:6px}

/* IoT Data Source Selector */
.iot-source-bar{padding:14px 16px;background:var(--bg2);border:1px solid var(--border2);border-radius:var(--radius);margin-bottom:16px;display:flex;align-items:center;gap:14px;flex-wrap:wrap}
.iot-source-label{font-size:10px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;color:var(--slate4);flex-shrink:0}
.iot-source-options{display:flex;gap:8px}
.iot-source-btn{display:inline-flex;align-items:center;gap:6px;padding:7px 14px;background:var(--bg3);border:1px solid var(--border2);border-radius:8px;color:var(--slate4);font-size:11px;font-weight:600;cursor:pointer;transition:all .2s;font-family:inherit}
.iot-source-btn:hover{border-color:var(--green);color:var(--text2)}
.iot-source-btn.active{border-color:var(--green);background:rgba(52,211,153,0.08);color:var(--green)}
.iot-source-dot{width:7px;height:7px;border-radius:50%;flex-shrink:0}
.iot-source-tag{font-size:8px;font-weight:700;letter-spacing:.5px;text-transform:uppercase;padding:2px 6px;border-radius:4px;background:rgba(100,116,139,0.15);color:var(--slate5)}
.iot-source-tag.green{background:rgba(52,211,153,0.15);color:var(--green)}
.iot-owm-key-row{display:flex;gap:8px;align-items:center;margin-left:auto}
.iot-key-input{padding:6px 12px;background:var(--bg3);border:1px solid var(--border2);border-radius:8px;color:var(--text);font-size:11px;width:280px;outline:none;font-family:inherit}
.iot-key-input:focus{border-color:var(--green)}

/* IoT Dust Card */
.iot-dust-card{border:1px solid rgba(217,119,6,0.2);background:rgba(217,119,6,0.03)}

/* IoT 24H Forecast */
.iot-forecast-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
@media(max-width:900px){.iot-forecast-grid{grid-template-columns:1fr}}
.iot-forecast-item{padding:12px;background:var(--bg3);border:1px solid var(--border2);border-radius:10px}

/* IoT Emissions Impact */
.iot-impact-grid{display:grid;grid-template-columns:repeat(6,1fr);gap:12px}
@media(max-width:900px){.iot-impact-grid{grid-template-columns:repeat(3,1fr)}}
@media(max-width:600px){.iot-impact-grid{grid-template-columns:repeat(2,1fr)}}
.iot-impact-item{padding:14px 10px;background:var(--bg3);border:1px solid var(--border2);border-radius:10px;text-align:center}
.iot-impact-label{font-size:9px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--slate4);margin-bottom:6px}
.iot-impact-value{font-size:20px;font-weight:800;line-height:1.2}
.iot-impact-unit{font-size:9px;color:var(--slate5);margin-top:4px}
